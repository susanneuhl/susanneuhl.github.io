<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta Informationen -->
    <meta name="description" content="Aktuelle Termine und Aufführungen mit Kostümen von Susanne Uhl. Theater, Oper und Schauspiel an renommierten Häusern in Deutschland.">
    <meta name="keywords" content="Susanne Uhl, Termine, Aufführungen, Theater, Oper, Kostümbild, Shows, Dates">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Susanne Uhl">
    
    <!-- Open Graph für Social Media -->
    <meta property="og:title" content="Termine – Susanne Uhl Kostümbild">
    <meta property="og:description" content="Aktuelle Termine und Aufführungen mit Kostümen von Susanne Uhl.">
    <meta property="og:image" content="https://susanneuhl.com/images/og-image.jpg">
    <meta property="og:url" content="https://susanneuhl.com/shows.html">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Termine – Susanne Uhl Kostümbild">
    <meta name="twitter:description" content="Aktuelle Termine und Aufführungen mit Kostümen von Susanne Uhl.">
    <meta name="twitter:image" content="https://susanneuhl.com/images/og-image.jpg">
    
    <title>Dates – Susanne Uhl</title>
    <link rel="canonical" href="https://susanneuhl.com/shows.html">
    <link rel="stylesheet" href="styles.css?v=bold6">
    <link rel="icon" href="favicon_custom.png" type="image/png">
    <link rel="shortcut icon" href="favicon_custom.png" type="image/png">

<!-- Strukturierte Daten für Suchmaschinen -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Termine – Susanne Uhl",
  "description": "Aktuelle Termine und Aufführungen mit Kostümen von Susanne Uhl.",
  "url": "https://susanneuhl.com/shows.html",
  "isPartOf": {
    "@type": "WebSite",
    "name": "Susanne Uhl Kostümbild",
    "url": "https://susanneuhl.com"
  },
  "about": {
    "@type": "Person",
    "name": "Susanne Uhl",
    "jobTitle": ["Kostümbildnerin", "Costume Designer"],
    "url": "https://susanneuhl.com"
  }
}
</script>

<script>document.documentElement.classList.add('js');</script>
</head>
<body class="page-dates">
    <!-- Sticky Header -->
    <header class="sticky-header">
        <div class="header-content">
            <h1 class="main-title">
                Susanne Uhl
                <span class="subtitle">Kostümbild</span>
            </h1>
        </div>
        <nav class="header-nav">
            <button class="hamburger" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="/" class="header-nav-link">Work</a>
                <a href="about.html" class="header-nav-link">About</a>
                <a href="shows.html" class="header-nav-link active">Dates</a>
                <a href="contact.html" class="header-nav-link">Contact</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <section id="event-calendar">
            <h2 class="desktop-dates-title">Dates</h2>
            <h2 class="mobile-dates-title">Dates</h2>
            <div class="events-list" id="shows-container">
                <!-- Shows werden dynamisch geladen -->
            </div>
            <div class="last-updated" id="last-updated"></div>
        </section>
    </main>
    
    <script>
        // Fallback-Daten für lokale Vorschau (wenn fetch wegen CORS blockiert wird)
        const fallbackData = {
          "last_updated": "2026-01-09T21:00:29.212421",
          "shows": {
            "dumme-jahre": {
              "title": "Dumme Jahre",
              "theater": "Deutsches Nationaltheater Weimar",
              "director": "Tilmann Köhler",
              "duration": null,
              "image": "images/dumme-jahre.jpg",
              "base_url": "https://www.dnt-weimar.de/de/programm/stueck-detail.php?SID=3520#event-tickets",
              "events": []
            },
            "sankt-falstaff": {
              "title": "Sankt Falstaff",
              "theater": "Theater Bonn",
              "director": "Tilmann Köhler",
              "author": "Ewald Palmetshofer",
              "duration": "3h 30min (1 Pause)",
              "image": "images/sankt-falstaff.jpg",
              "base_url": "https://www.theater-bonn.de/de/programm/sankt-falstaff/221198#dates-and-tickets",
              "events": [
                {
                  "date": "2026-01-16 18:30",
                  "display_date": "16.01.2026",
                  "display_time": "18:30",
                  "ticket_url": "https://www.theater-bonn.de/de/programm/sankt-falstaff/221198#dates-and-tickets"
                },
                {
                  "date": "2026-02-06 18:30",
                  "display_date": "06.02.2026",
                  "display_time": "18:30",
                  "ticket_url": "https://www.theater-bonn.de/de/programm/sankt-falstaff/221198#dates-and-tickets"
                }
              ]
            },
            "der-komet": {
              "title": "Der Komet",
              "theater": "Staatsschauspiel Dresden",
              "director": "Tilmann Köhler",
              "author": "Durs Grünbein",
              "duration": "2h 40min (1 Pause)",
              "image": "images/der-komet.jpg",
              "base_url": "https://tickets.staatsschauspiel-dresden.de/webshop/webticket/eventlist?production=709",
              "events": []
            },
            "undine": {
              "title": "Undine",
              "theater": "Oper Leipzig",
              "director": "Tilmann Köhler",
              "author": "Albert Lortzing",
              "duration": "2 3/4h (1 Pause)",
              "image": "images/undine.jpg",
              "base_url": "https://www.oper-leipzig.de/de/ensemble/person/susanne-uhl/1902",
              "events": [
                {
                  "date": "2026-04-30 19:30",
                  "display_date": "30.04.2026",
                  "display_time": "19:30",
                  "ticket_url": "https://www.oper-leipzig.de/de/ensemble/person/susanne-uhl/1902"
                }
              ]
            },
            "krieg-und-frieden": {
              "title": "Krieg und Frieden",
              "theater": "Düsseldorfer Schauspielhaus",
              "director": "Tilmann Köhler",
              "author": "Lew Tolstoi / Armin Petras",
              "duration": "ca. 5h (2 Pausen)",
              "image": "images/thumbs/krieg-und-frieden.jpg",
              "base_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/",
              "events": [
                {
                  "date": "2026-02-18 16:00",
                  "display_date": "18.02.2026",
                  "display_time": "16:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-02-21 17:00",
                  "display_date": "21.02.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-02-27 17:00",
                  "display_date": "27.02.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-03-14 17:00",
                  "display_date": "14.03.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-03-29 15:00",
                  "display_date": "29.03.2026",
                  "display_time": "15:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-04-06 15:00",
                  "display_date": "06.04.2026",
                  "display_time": "15:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-04-26 17:00",
                  "display_date": "26.04.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-05-10 15:00",
                  "display_date": "10.05.2026",
                  "display_time": "15:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-05-14 15:00",
                  "display_date": "14.05.2026",
                  "display_time": "15:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-05-24 15:00",
                  "display_date": "24.05.2026",
                  "display_time": "15:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-06-12 17:00",
                  "display_date": "12.06.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                },
                {
                  "date": "2026-07-04 17:00",
                  "display_date": "04.07.2026",
                  "display_time": "17:00",
                  "ticket_url": "https://www.dhaus.de/programm/a-z/krieg-und-frieden/"
                }
              ]
            }
          }
        };

        // Lade Show-Daten und erstelle Events
        async function loadShows() {
            let data;
            try {
                // Versuche fetch (funktioniert live oder auf lokalem Server)
                const response = await fetch('data/shows.json');
                if (!response.ok) throw new Error('Network response was not ok');
                data = await response.json();
            } catch (error) {
                // Fallback für lokale Vorschau ohne Server (file:// Protokoll)
                console.warn('Lade Daten aus Fallback (lokal/CORS):', error);
                data = fallbackData;
            }

            try {
                const container = document.getElementById('shows-container');
                const lastUpdatedElement = document.getElementById('last-updated');
                
                // Hilfsfunktion zum Parsen des Datumsstrings "YYYY-MM-DD HH:MM"
                const parseDate = (dateStr) => new Date(dateStr.replace(' ', 'T'));
                
                // Zeige letztes Update
                const updateDate = new Date(data.last_updated).toLocaleString('de-DE');
                lastUpdatedElement.textContent = `Zuletzt aktualisiert: ${updateDate}`;
                
                // Sortiere Shows nach dem nächsten Termin (chronologisch)
                const sortedShows = Object.entries(data.shows).sort(([aId, aShow], [bId, bShow]) => {
                    // Finde den nächsten zukünftigen Termin für jede Show
                    const now = new Date();
                    now.setHours(0, 0, 0, 0); // Heute 00:00 Uhr

                    const getNextEventDate = (show) => {
                        if (!show.events) return null;
                        const event = show.events.find(e => {
                            const d = parseDate(e.date);
                            d.setHours(0,0,0,0);
                            return d >= now;
                        });
                        return event ? parseDate(event.date) : null;
                    };

                    const aDate = getNextEventDate(aShow);
                    const bDate = getNextEventDate(bShow);
                    
                    // Falls eine Show keine zukünftigen Termine hat, setze sie ans Ende
                    if (!aDate && !bDate) return 0;
                    if (!aDate) return 1;
                    if (!bDate) return -1;
                    
                    // Sortiere nach dem nächsten Termin
                    return aDate - bDate;
                });
                
                // Erstelle Events für jede Show (jetzt chronologisch sortiert)
                for (let idx = 0; idx < sortedShows.length; idx++) {
                    const [showId, show] = sortedShows[idx];
                    
                    // Filter: Zeige Show nur, wenn Termine vorhanden sind
                    // Prüfe, ob mindestens ein Event in der Zukunft liegt (oder heute ist)
                    const hasFutureEvents = show.events && show.events.some(event => {
                        const eventDate = parseDate(event.date);
                        // Setze Zeit auf 00:00:00 für den Vergleich, damit heutige Events (auch wenn sie zeitlich schon vorbei wären) noch angezeigt werden
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        
                        // Event Datum auch auf 00:00:00 normalisieren für den reinen Tagesvergleich
                        const eventDay = new Date(eventDate);
                        eventDay.setHours(0, 0, 0, 0);

                        return eventDay >= today;
                    });

                    if (!hasFutureEvents) {
                        continue; // Überspringe Shows ohne zukünftige Termine
                    }

                    const eventCard = document.createElement('div');
                    eventCard.className = 'event-card';
                    
                    // Event-Bild (Thumbnail im Grid, AVIF wenn verfügbar)
                    const eventPicture = document.createElement('picture');
                    const eventSource = document.createElement('source');
                    eventSource.type = 'image/avif';

                    // Ableitung des Basenamens aus der Bild-URL (z.B. images/undine.jpg -> undine)
                    const filename = (show.image || '').split('/').pop() || '';
                    const base = filename.replace(/\.(jpg|jpeg|png)$/i, '');

                    // Thumbs sind deutlich kleiner/schneller zu decodieren (gleiches Layout)
                    const thumbAvif = `images/thumbs/${base}.avif`;
                    const thumbJpg = `images/thumbs/${base}.jpg`;

                    eventSource.srcset = thumbAvif;
                    const eventImage = document.createElement('img');
                    eventImage.src = thumbJpg;
                    eventImage.alt = show.title;
                    eventImage.loading = idx < 2 ? 'eager' : 'lazy';
                    eventImage.decoding = 'async';
                    eventImage.fetchPriority = idx < 2 ? 'high' : 'low';

                    // Fallback: falls ein Thumb fehlt, nimm das Original aus shows.json
                    eventImage.onerror = () => {
                        eventImage.onerror = null;
                        eventImage.src = show.image;
                    };
                    
                    eventPicture.appendChild(eventSource);
                    eventPicture.appendChild(eventImage);
                    
                    // Bild-Wrapper für Layout
                    const imageWrapper = document.createElement('div');
                    imageWrapper.className = 'event-image-wrapper';
                    imageWrapper.appendChild(eventPicture);

                    // Event-Content (statt Overlay)
                    const eventContent = document.createElement('div');
                    eventContent.className = 'event-content';
                    
                    // Header Wrapper für Titel und Ort
                    const eventHeader = document.createElement('div');
                    eventHeader.className = 'event-header';

                    // Titel und Theater
                    const eventTitle = document.createElement('div');
                    eventTitle.className = 'event-title';
                    eventTitle.textContent = show.title;
                    
                    const eventLocation = document.createElement('div');
                    eventLocation.className = 'event-location';
                    eventLocation.textContent = show.theater;
                    
                    eventHeader.appendChild(eventTitle);
                    eventHeader.appendChild(eventLocation);

                    // Autor hinzufügen, falls vorhanden
                    if (show.author) {
                        const eventAuthor = document.createElement('div');
                        eventAuthor.className = 'event-author';
                        eventAuthor.textContent = `von ${show.author}`;
                        eventHeader.appendChild(eventAuthor);
                    }

                    // Regie hinzufügen, falls vorhanden
                    if (show.director) {
                        const eventDirector = document.createElement('div');
                        eventDirector.className = 'event-director';
                        eventDirector.textContent = `Regie: ${show.director}`;
                        eventHeader.appendChild(eventDirector);
                    }

                    // Dauer hinzufügen, falls vorhanden
                    if (show.duration) {
                        const eventDuration = document.createElement('div');
                        eventDuration.className = 'event-duration';
                        eventDuration.textContent = `Dauer: ${show.duration}`;
                        eventHeader.appendChild(eventDuration);
                    }

                    eventContent.appendChild(eventHeader);
                    
                    // Termine
                    if (show.events && show.events.length > 0) {
                        const eventDates = document.createElement('div');
                        eventDates.className = 'event-dates';
                        
                        show.events.forEach(event => {
                            const dateItem = document.createElement('div');
                            dateItem.className = 'event-date';
                            
                            const dateInfo = document.createElement('div');
                            dateInfo.className = 'date-info';
                            
                            const dateDay = document.createElement('div');
                            dateDay.className = 'date-day';
                            // Wochentag hinzufügen (z.B. "Fr, 09.01.2026")
                            const dateObj = new Date(event.date);
                            const options = { weekday: 'short', day: '2-digit', month: '2-digit', year: 'numeric' };
                            dateDay.textContent = dateObj.toLocaleDateString('de-DE', options);
                            
                            const dateTime = document.createElement('div');
                            dateTime.className = 'date-time';
                            dateTime.textContent = `${event.display_time} Uhr`;
                            
                            dateInfo.appendChild(dateDay);
                            dateInfo.appendChild(dateTime);
                            
                            const ticketLink = document.createElement('a');
                            ticketLink.href = event.ticket_url;
                            ticketLink.target = '_blank';
                            ticketLink.className = 'date-ticket-link';
                            ticketLink.textContent = 'Tickets';
                            
                            dateItem.appendChild(dateInfo);
                            dateItem.appendChild(ticketLink);
                            eventDates.appendChild(dateItem);
                        });
                        
                        eventContent.appendChild(eventDates);
                    } else {
                        // Fallback wenn keine Termine verfügbar
                        const noEvents = document.createElement('div');
                        noEvents.className = 'no-events';
                        noEvents.textContent = 'Keine aktuellen Termine verfügbar';
                        eventContent.appendChild(noEvents);
                    }
                    
                    eventCard.appendChild(imageWrapper);
                    eventCard.appendChild(eventContent);
                    container.appendChild(eventCard);
                }
                
                // JSON-LD Event-Schema für SEO erstellen
                const now = new Date();
                const upcomingEvents = [];
                
                // Sammle alle zukünftigen Events aus allen Shows
                for (const [showId, show] of Object.entries(data.shows)) {
                    if (!show.events) continue;
                    for (const event of show.events) {
                        // Datum parsen (sicherer als new Date(string))
                        const eventDateStr = event.date.replace(' ', 'T');
                        const eventDate = new Date(eventDateStr);
                        
                        if (eventDate > now) {
                            upcomingEvents.push({
                                title: show.title,
                                startDate: eventDateStr,
                                location: show.theater,
                                theater: show.theater,
                                website: show.base_url
                            });
                        }
                    }
                }
                
                // Erstelle JSON-LD Schema
                if (upcomingEvents.length > 0) {
                    const eventsSchema = {
                        "@context": "https://schema.org",
                        "@type": "ItemList",
                        "itemListElement": upcomingEvents.map((event, index) => ({
                            "@type": "Event",
                            "name": event.title,
                            "startDate": event.startDate,
                            "location": {
                                "@type": "Place",
                                "name": event.location,
                                "address": {
                                    "@type": "PostalAddress",
                                    "addressLocality": event.location
                                }
                            },
                            "organizer": {
                                "@type": "Organization",
                                "name": event.theater,
                                "url": event.website
                            },
                            "performer": {
                                "@type": "Person",
                                "name": "Susanne Uhl",
                                "jobTitle": "Kostümbildnerin",
                                "url": "https://susanneuhl.com"
                            },
                            "position": index + 1
                        }))
                    };
                    
                    // Schema in die Seite einfügen
                    const script = document.createElement('script');
                    script.type = 'application/ld+json';
                    script.textContent = JSON.stringify(eventsSchema);
                    document.head.appendChild(script);
                }

            } catch (error) {
                console.error('Fehler beim Laden der Show-Daten:', error);
                document.getElementById('shows-container').innerHTML = 
                    '<div class="no-events">Termine konnten nicht geladen werden. Bitte versuchen Sie es später erneut.</div>';
            }
        }
        
        // Lade Shows beim Seitenaufruf
        document.addEventListener('DOMContentLoaded', loadShows);
    </script>

    <!-- Footer -->
    <footer>
        <p style="text-align: center; margin-top: 20px;">
            © 2026 Susanne Uhl. Alle Rechte vorbehalten. 
            <a href="impressum.html" style="color: #333333; text-decoration: none; margin-left: 10px;">Impressum</a>
        </p>
    </footer>

<script>
(function() {
  // Prüfe ob der Browser native View Transitions unterstützt
  var hasViewTransitions = CSS.supports && CSS.supports('view-transition-name', 'none');

  // Fade-in on load (nur als Fallback wenn keine View Transitions)
  function markLoaded() {
    document.body.classList.add('is-loaded');
    document.body.classList.remove('is-exiting');
  }

  // Ensure correct state when coming from bfcache
  window.addEventListener('pageshow', markLoaded);
  document.addEventListener('DOMContentLoaded', markLoaded);

  // Intercept internal navigation to fade out
  // Nur wenn View Transitions NICHT unterstützt werden
  if (!hasViewTransitions) {
    document.addEventListener('click', function(e) {
      const a = e.target.closest && e.target.closest('a');
      if (!a) return;

      // Ignore modified clicks / new tab
      if (e.defaultPrevented) return;
      if (e.button !== 0) return;
      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;

      const href = a.getAttribute('href');
      if (!href || href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('tel:')) return;
      if (a.target && a.target !== '_self') return;

      // Only same-origin navigations
      let url;
      try {
        url = new URL(href, window.location.href);
      } catch {
        return;
      }
      if (url.origin !== window.location.origin) return;

      // If it's the same page with just a hash, don't animate
      const sameDoc = (url.pathname === window.location.pathname) && (url.search === window.location.search);
      if (sameDoc && url.hash) return;

      e.preventDefault();
      document.body.classList.add('is-exiting');

      // Small delay for fade-out
      window.setTimeout(function() {
        window.location.href = url.href;
      }, 260);
    }, true);
  }
})();
</script>

<script>
// Hamburger Menu Toggle
(function() {
  const hamburger = document.querySelector('.hamburger');
  const navLinks = document.querySelector('.nav-links'); const header = document.querySelector('.sticky-header');
  
  if (hamburger && navLinks) {
    hamburger.addEventListener('click', function() {
      hamburger.classList.toggle('active');
      navLinks.classList.toggle('active'); if (header) header.classList.toggle('menu-open');
    });
    
    // Close menu when clicking a link
    document.querySelectorAll('.header-nav-link').forEach(function(link) {
      link.addEventListener('click', function() {
        hamburger.classList.remove('active');
        navLinks.classList.remove('active'); if (header) header.classList.remove('menu-open');
      });
    });
  }
})();
</script>

</body>
</html>
